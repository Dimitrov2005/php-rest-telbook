var DATA = new ClientData();DATA.loadTeltypes();$(document).ready(function() {		reload_persons();	// PERSONS	$(document).on('click', 'a.persons-refresh', function() {		reload_persons();		return false;	});	$(document).on('click', 'a.person-add', function() {		var person = {			id: 0,			fname: '',			lname: '',			address: ''		};		$('#person-form').html(render_person_form(person));		$('#person-messages').html('');	});	$(document).on('click', 'a.person-edit', function() {		$('#person-messages').html('');		var person_id = $(this).data('id');		$('#person-form').html(render_person_form(DATA.getPerson(person_id)));		render_persons();		return false;	});	$(document).on('submit', '#person-edit-form', function() {		var person = $(this).serializeObject();		$.postJSON('persons/' + person.id, person).done(function(data) {			$('#person-form').html('');			$('#person-messages').html(render_messages(data.messages));			reload_persons();		}).fail(function(response) {			var data = response.responseJSON;			$('#person-messages').html(render_messages(data.messages));		});				return false;	});	$(document).on('click', 'a.person-delete', function() {		$.delete('persons/' + $(this).data('id')).done(function(data) {			$('#person-form').html('');			$('#person-messages').html(render_messages(data.messages));			reload_persons();		});		return false;	});	// TELEPHONES	$(document).on('click', 'a.person-telephones, a.telephones-refresh', function() {		DATA.person_id = $(this).data('id');		render_persons();		reload_telephones();		$('#telephone-form, #telephone-messages').html('');		return false;	});	$(document).on('click', 'a.telephone-delete', function() {		$.delete('telephones/' + $(this).data('id')).done( function(data) {			$('#telephone-messages').html(render_messages(data.messages));			$('#telephone-details').html('');			reload_telephones();		});		return false;	});	$(document).on('click', 'a.telephone-edit', function() {		var telephone = DATA.getTelephone($(this).data('id'));		$('#telephone-form').html(render_telephone_form(telephone));		$('#telephone-messages').html('');		return false;	});	$(document).on('click', 'a.telephone-add', function() {		var telephone = {			id: 0,			person_id: $(this).data('id'),			number: '',			teltype_id: ''		};		$('#telephone-form').html(render_telephone_form(telephone));		$('#telephone-messages').html('');		return false;	});	$(document).on('submit', '#telephone-edit-form', function() {		var telephone = $(this).serializeObject();		$.postJSON('telephones/' + telephone.id, telephone).done(function(data) {			reload_telephones();			$('#telephone-form').html('');			$('#telephone-messages').html(render_messages(data.messages));		}).fail(function(response) {			var data = response.responseJSON;			$('#telephone-messages').html(render_messages(data.messages));		});		return false;	});	});